---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { UI, t } from '../../i18n/strings';
import { SOCIAL_LINKS } from '../../content/socials';
import TileCard from '../../components/TileCard.astro';
import TileStack2 from '../../components/TileStack2.astro';

const lang = 'ru' as const;
const socialPairs = Array.from({ length: Math.ceil(SOCIAL_LINKS.length / 2) }, (_, i) => [
	SOCIAL_LINKS[i * 2],
	SOCIAL_LINKS[i * 2 + 1],
]).filter((pair) => pair[0]);
---

<BaseLayout lang={lang} title={UI.brand}>
	<section class="intro">
		<div class="intro__row">
			<h1 class="h1">
				Привет, я {UI.brand},
				<br />
				<span class="h1__sub">{t(UI.hero.title, lang)}.</span>
			</h1>

			<div class="avatarWrap" aria-label="Профиль">
				<picture class="avatar" aria-hidden="true">
					<img
						class="avatar__img"
						src="/profile.png"
						alt=""
						width="128"
						height="128"
						loading="eager"
						decoding="async"
						onerror="this.style.display='none'"
					/>
				</picture>
			</div>
		</div>
		<p class="p">{t(UI.hero.subtitle, lang)}</p>
	</section>

	<section class="grid" aria-label="Плитки">
		<TileCard
			kind="studio"
			title="Tea Agency Games"
			description={{ ru: 'Мы делаем игры на стыке комфорта и тревожности.', en: 'We make games at the intersection of comfort and anxiety.' }}
			href="https://tea-agency.itch.io/"
			meta="itch.io"
			lang={lang}
		/>

		<TileCard
			kind="project"
			title="Rouletum"
			description={{
				ru: 'Рогалик на основе рулетки с щепоткой сверхъестественного: ставки, мистические сигилы и путь наверх в казино Rouletum.',
				en: 'Roulette-based rogue-like with a bit of supernatural. Place your bets, use mystical sigils, and climb the Rouletum Casino.',
			}}
			href="https://store.steampowered.com/app/3344350/Rouletum/"
			meta="Steam"
			lang={lang}
		/>

		<TileCard
			kind="link"
			title="Резюме"
			description={{ ru: 'Опыт, навыки, инструменты — коротко и структурно.', en: 'Experience, skills, tools — structured and short.' }}
			href={`/${lang}/resume`}
			lang={lang}
		/>

		{socialPairs.map(([a, b]) => (
			<TileStack2
				class="socialStack"
				top={{ title: t(a.label, lang), description: { ru: 'Внешняя ссылка', en: 'External link' }, href: a.href, icon: a.key }}
				bottom={
					b
						? { title: t(b.label, lang), description: { ru: 'Внешняя ссылка', en: 'External link' }, href: b.href, icon: b.key }
						: undefined
				}
				lang={lang}
			/>
		))}
	</section>
</BaseLayout>

<style>
	.intro {
		padding: 6px 0 16px;
	}

	.intro__row {
		display: flex;
		align-items: flex-start;
		justify-content: space-between;
		gap: 16px;
	}

	.h1 {
		margin: 0 0 10px;
		font-size: clamp(34px, 5.2vw, 54px);
		line-height: 1.08;
		letter-spacing: -0.02em;
	}

	.h1__sub {
		font-weight: 600;
	}

	.p {
		margin: 0;
		max-width: 76ch;
		color: rgba(255, 255, 255, 0.72);
		font-size: 16px;
	}

	.avatar {
		flex: 0 0 auto;
		width: clamp(96px, 12vw, 132px);
		height: clamp(96px, 12vw, 132px);
	}

	.avatar__img {
		display: block;
		width: 100%;
		height: 100%;
		object-fit: cover;
		image-rendering: pixelated;
	}

	.avatarWrap {
		display: grid;
		justify-items: end;
	}

	@media (max-width: 520px) {
		.avatar {
			width: 88px;
			height: 88px;
		}
	}

	.grid {
		margin-top: 18px;
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
		gap: 0;
	}

	/* Держим соц‑плитки в последней (правой) колонке, чтобы LinkedIn/YouTube не уезжали влево */
	.grid :global(.socialStack) {
		grid-column: -1;
	}
</style>


